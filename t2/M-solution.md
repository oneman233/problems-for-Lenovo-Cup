题面中有两个重要信息：

* 沙子下落当且仅当它下面没有沙子或者它不在地面上
* 每次只能选择某一种字母全部填上沙子

考虑怎样的放置顺序才能让沙子不下落：

* 对于放在地面上的沙子来说，它们可以在任意时候被放置
* 对于没有放在地面上的沙子来说，它们必须在自己下面的沙子被放置好后才能被放置

我们不妨考虑用有向图来表示这种关系，低层沙子的标记向高层沙子的标记连边，对于那些入度为 $0$ 的标记，我们显然可以在第一时间就放置它们

这很快让我们联想到**拓扑排序**

但是如果原图中有环是什么情况呢？标记 $A$ 能放置当且仅当标记 $B$ 已经放置，标记 $B$ 能放置当且仅当标记 $A$ 已经放置，显然这种情况是无解的

最后为了输出字典序最大，你需要在拓扑排序中使用**堆**来维护标记的入队出队

出题人觉得很绝望的一点是可能由于数据太弱，被很多回溯的dfs搞过去了

实际上本来是考虑要卡掉dfs的，相对来说拓扑排序要优雅的多

这道题定位是签到，idea来自于google去年kickstart的一道题。原题在二维平面上并且可以输出任意放置顺序，但是为了不写special judge加上了字典序一条规则，并且我发现三维和二维空间的解法没什么本质区别，所以改到了三维。不得不说google的出题水平太高了。